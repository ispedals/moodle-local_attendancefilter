<script>
!function(){try{if(-1==window.location.pathname.search(/grade\/report\/grader\/index[.]php$/)&&-1==window.location.search.match(/[?&]edit=1/))return
var e=window.location.search.match(/[?&]id=(\d+)/)
if(!e)return
var t=e[1],r=new XMLHttpRequest
r.open("GET","/moodle/local/attendancefilter/ajax.php?mode=list&course="+t,!0),r.onreadystatechange=function(e){try{if(4==r.readyState&&200==r.status){var a=JSON.parse(r.responseText),n=Object.keys(a)
if(0==n.length)return
for(var i='<option value="">All</option>',o=0;o<n.length;o++)i+='<option value="'+n[o]+'">'+a[n[o]].description+"</option>"
var l=document.createElement("select")
l.id="attendancefilter",l.innerHTML=i,l.addEventListener("change",function(e){try{for(var r=document.querySelectorAll("#user-grades tr[data-uid]"),a=0;a<r.length;a++)r[a].style.visibility="inherit"
for(r=document.querySelectorAll("div.floater.sideonly div.user[data-uid]"),a=0;a<r.length;a++)r[a].style.visibility="inherit"
if(""==e.target.value)return
var n=new XMLHttpRequest
n.open("GET","/moodle/local/attendancefilter/ajax.php?mode=filter&course="+t+"&session="+e.target.value,!0),n.onreadystatechange=function(e){if(4==n.readyState&&200==n.status){for(var t=JSON.parse(n.responseText),r=document.querySelectorAll("#user-grades tr[data-uid]"),a=0;a<r.length;a++)t[r[a].dataset.uid]||(r[a].style.visibility="hidden")
for(r=document.querySelectorAll("div.floater.sideonly div.user[data-uid]"),a=0;a<r.length;a++)t[r[a].dataset.uid]||(r[a].style.visibility="hidden")}},n.send(null)}catch(i){console.error(i)}})
var d=document.getElementsByClassName("firstinitial")[0]
d.parentNode.insertBefore(l,d)}}catch(s){console.error(s)}},r.send(null)}catch(a){console.error(a)}}()
</script>